<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>体温详情</title>
    <style>
        :root {
            --bg-color: #16191d;
            --card-bg: #2c2f33;
            --text-primary: #ffffff;
            --text-secondary: #e5e5e5;
            --text-tertiary: #a0a0a0;
            --text-light: #888888;
            --accent-orange: #f97316;
            --accent-orange-selected: #ea580c;
            --link-blue: #8c9eff;
            --border-color: #3a3a3a;
            --temp-normal: #4caf50;
            --temp-low-fever: #ff9800;
            --temp-high-fever: #f44336;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 2rem 0;
        }
        .iphone-frame {
            width: 375px;
            height: 812px;
            background-color: #111;
            border-radius: 40px;
            padding: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 2px solid #444;
        }
        .screen {
            width: 100%;
            height: 100%;
            background-color: var(--bg-color);
            border-radius: 32px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        /* Header Navigation */
        .header-nav {
            padding: 10px 15px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border-color);
        }
        .back-button {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--link-blue);
            text-decoration: none;
            font-size: 16px;
            padding: 5px;
        }
        .back-button svg {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            stroke-width: 2;
            fill: none;
            stroke-linecap: round;
            stroke-linejoin: round;
        }
        .back-button:hover {
            opacity: 0.8;
        }
        .page-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }
        .header-spacer {
            width: 60px;
        }
        
        .scroll-view {
            flex: 1;
            overflow-y: auto;
        }
        .scroll-view::-webkit-scrollbar { display: none; }
        .scroll-view { -ms-overflow-style: none; scrollbar-width: none; }

        /* Time Range Selector */
        .time-range-container {
            margin: 10px 15px;
            padding: 4px;
            background-color: #3a3a3a;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
        }
        .time-range-btn {
            flex: 1;
            padding: 8px 12px;
            border: none;
            background-color: transparent;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .time-range-btn.active {
            background-color: var(--card-bg);
            color: var(--text-primary);
            font-weight: bold;
            box-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
        
        /* RealTime Temperature */
        .realtime-container {
            margin: 20px 15px;
            padding: 20px;
            background-color: var(--card-bg);
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .temp-icon {
            width: 40px;
            height: 40px;
            fill: var(--accent-orange);
            animation: tempPulse 2s infinite;
        }
        @keyframes tempPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .temp-value { font-size: 40px; font-weight: bold; color: var(--accent-orange); }
        .temp-label, .date-label { font-size: 14px; }
        .temp-label { color: var(--text-secondary); }
        .date-label { color: var(--text-light); margin-top: 4px; }
        
        .range-bar-container { width: 160px; }
        .range-pointer {
            width: 20px;
            height: 15px;
            fill: var(--text-secondary);
            margin-bottom: -2px;
        }
        .range-bar {
            height: 12px;
            border-radius: 6px;
            display: flex;
            overflow: hidden;
        }
        .range-segment-normal { background-color: var(--temp-normal); flex: 0.45; }
        .range-segment-low-fever { background-color: var(--temp-low-fever); flex: 0.35; }
        .range-segment-high-fever { background-color: var(--temp-high-fever); flex: 0.2; }
        .range-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 4px;
            position: relative;
        }
        .range-labels span:nth-child(2) { position: absolute; left: 45%; transform: translateX(-50%);}
        .range-labels span:nth-child(3) { position: absolute; left: 80%; transform: translateX(-50%);}
        
        /* Status Indicator */
        .status-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 60px;
        }
        .status-text {
            font-size: 18px;
            font-weight: 600;
            color: #4caf50;
            padding: 8px 16px;
            border-radius: 20px;
            background-color: rgba(76, 175, 80, 0.1);
        }
        
        /* Chart */
        .chart-container {
            margin: 0 15px;
            padding: 10px 20px;
            background-color: var(--card-bg);
            border-radius: 10px;
            height: 250px;
            position: relative;
        }
        .chart-svg { width: 100%; height: 100%; }
        .grid-line { stroke: #3a3a3a; stroke-width: 0.5; }
        .axis-label { font-size: 12px; fill: var(--text-tertiary); }

        /* Summary Cards */
        .summary-container {
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .summary-card {
            background-color: var(--card-bg);
            padding: 15px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .summary-card.active {
            background-color: var(--accent-orange-selected);
        }
        .summary-card.active .summary-label,
        .summary-card.active .summary-value,
        .summary-card.active .summary-unit {
            color: white;
        }
        .summary-label { font-size: 16px; color: var(--text-primary); }
        .summary-value { font-size: 20px; font-weight: bold; color: var(--text-primary); }
        .summary-unit { font-size: 14px; color: var(--text-tertiary); margin-left: 4px; }
        
        /* Events Card */
        .events-card {
            margin: 10px 15px 20px;
            padding: 20px;
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 10px;
        }
        .events-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .events-title-container { display: flex; align-items: center; gap: 8px; }
        .events-title { font-size: 20px; font-weight: bold; color: var(--text-secondary); }
        .event-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
        }
        .event-label-container { display: flex; align-items: center; gap: 10px; }
        .event-label { font-size: 18px; color: var(--text-secondary); }
        .event-count { font-size: 20px; font-weight: bold; color: var(--text-secondary); }
        .event-icon-small { width: 18px; height: 18px; }

        /* Temperature Standards Card */
        .standards-card {
            margin: 10px 15px 20px;
            padding: 20px;
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 10px;
        }
        .standards-title { 
            font-size: 20px; 
            font-weight: bold; 
            color: var(--text-secondary); 
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .temp-standard-item {
            margin-bottom: 15px;
            padding: 12px 0;
        }
        .temp-standard-item:last-child {
            margin-bottom: 0;
        }
        .temp-standard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        .temp-standard-name {
            font-size: 16px;
            font-weight: 500;
            color: var(--text-primary);
        }
        .temp-standard-range {
            font-size: 14px;
            color: var(--text-tertiary);
        }
        .temp-standard-bar {
            height: 8px;
            background-color: #2a2a2a;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }
        .temp-range-segment {
            height: 100%;
            position: absolute;
            border-radius: 4px;
        }
        .temp-ppg { background: linear-gradient(90deg, #3b82f6, #1d4ed8); }
        .temp-armpit { background: linear-gradient(90deg, #10b981, #047857); }
        .temp-tongue { background: linear-gradient(90deg, #f59e0b, #d97706); }
        .temp-rectal { background: linear-gradient(90deg, #ef4444, #dc2626); }
        .temp-scale {
            display: flex;
            justify-content: space-between;
            margin-top: 4px;
            font-size: 11px;
            color: var(--text-light);
            position: relative;
        }
        .temp-scale span:nth-child(2) {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }
        .standard-item:last-child {
            border-bottom: none;
        }
        .standard-type {
            font-size: 16px;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        .standard-range {
            font-size: 14px;
            color: var(--text-tertiary);
        }

        /* Learn More Link */
        .learn-more {
            text-align: center;
            padding: 30px 0;
            font-size: 16px;
            color: var(--link-blue);
            text-decoration: none;
            display: block;
        }
    </style>
</head>
<body>
    <div class="iphone-frame">
        <div class="screen">
            <div class="header-nav">
                <a href="physiological-indicators.html" class="back-button">
                    <svg viewBox="0 0 24 24"><path d="M19 12H5M12 19L5 12 12 5"/></svg>
                    返回
                </a>
                <span class="page-title">体温详情</span>
                <div class="header-spacer"></div>
            </div>
            <div class="scroll-view">
                <div class="time-range-container"></div>
                <div class="realtime-container">
                    <div class="temp-info">
                        <svg class="temp-icon" viewBox="0 0 24 24">
                            <path d="M15 13V5a3 3 0 0 0-6 0v8a5 5 0 0 0 6 0zM12 4a1 1 0 0 1 1 1v8.18A3 3 0 1 1 11 13.18V5a1 1 0 0 1 1-1z"/>
                        </svg>
                        <div class="temp-value">36.8</div>
                        <div class="temp-label">实时体温 °C</div>
                        <div class="date-label">今天</div>
                    </div>
                    <div class="range-bar-container">
                        <svg class="range-pointer" viewBox="0 0 20 15"><polygon points="10,0 20,15 0,15"/></svg>
                        <div class="range-bar">
                            <div class="range-segment-normal"></div>
                            <div class="range-segment-low-fever"></div>
                            <div class="range-segment-high-fever"></div>
                        </div>
                        <div class="range-labels">
                            <span>36°C</span><span>38°C</span><span>39.4°C</span>
                        </div>
                    </div>
                    <div class="status-indicator" style="display: none;">
                        <span class="status-text">正常</span>
                    </div>
                </div>
                <div class="chart-container">
                    <svg class="chart-svg"></svg>
                </div>
                <div class="summary-container"></div>
                
                <!-- Temperature Standards -->
                <div class="standards-card">
                    <div class="standards-title">体温标准参考</div>
                    <div class="standard-item">
                        <div class="standard-type">PPG 手腕皮肤温度</div>
                        <div class="standard-range">33-37°C (92.3-98.4°F)</div>
                    </div>
                    <div class="standard-item">
                        <div class="standard-type">腋下体温</div>
                        <div class="standard-range">36.0-37.0°C (96.8-98.6°F)</div>
                    </div>
                    <div class="standard-item">
                        <div class="standard-type">舌下体温</div>
                        <div class="standard-range">36.3-37.2°C (97.34-98.96°F)</div>
                    </div>
                    <div class="standard-item">
                        <div class="standard-type">直肠体温</div>
                        <div class="standard-range">36.5-37.7°C (97.7-99.86°F)</div>
                    </div>
                </div>
                
                <div class="events-card">
                    <div class="events-header">
                        <div class="events-title-container">
                             <svg class="temp-icon" style="width:22px; height:22px; animation:none;" viewBox="0 0 24 24">
                                <path d="M15 13V5a3 3 0 0 0-6 0v8a5 5 0 0 0 6 0zM12 4a1 1 0 0 1 1 1v8.18A3 3 0 1 1 11 13.18V5a1 1 0 0 1 1-1z"/>
                             </svg>
                            <span class="events-title">体温事件通知</span>
                        </div>
                    </div>
                    <div class="event-item">
                        <div class="event-label-container">
                            <svg class="event-icon-small" style="fill: var(--temp-normal);" viewBox="0 0 24 24">
                                <path d="M15 13V5a3 3 0 0 0-6 0v8a5 5 0 0 0 6 0zM12 4a1 1 0 0 1 1 1v8.18A3 3 0 1 1 11 13.18V5a1 1 0 0 1 1-1z"/>
                            </svg>
                            <span class="event-label">正常体温</span>
                        </div>
                        <span class="event-count">24</span>
                    </div>
                    <div class="event-item">
                        <div class="event-label-container">
                            <svg class="event-icon-small" style="fill: var(--temp-low-fever);" viewBox="0 0 24 24">
                                <path d="M15 13V5a3 3 0 0 0-6 0v8a5 5 0 0 0 6 0zM12 4a1 1 0 0 1 1 1v8.18A3 3 0 1 1 11 13.18V5a1 1 0 0 1 1-1z"/>
                            </svg>
                            <span class="event-label">发低烧</span>
                        </div>
                        <span class="event-count">0</span>
                    </div>
                    <div class="event-item">
                        <div class="event-label-container">
                            <svg class="event-icon-small" style="fill: var(--temp-high-fever);" viewBox="0 0 24 24">
                                <path d="M15 13V5a3 3 0 0 0-6 0v8a5 5 0 0 0 6 0zM12 4a1 1 0 0 1 1 1v8.18A3 3 0 1 1 11 13.18V5a1 1 0 0 1 1-1z"/>
                            </svg>
                            <span class="event-label">发高烧</span>
                        </div>
                        <span class="event-count">0</span>
                    </div>
                </div>
                
                <!-- Temperature Standards Reference Card -->
                <div class="standards-card">
                    <div class="standards-title">
                        <svg style="width:22px; height:22px; fill: var(--temp-orange);" viewBox="0 0 24 24">
                            <path d="M15 13V5a3 3 0 0 0-6 0v8a5 5 0 1 0 6 0zM12 4a1 1 0 0 1 1 1v8.17a3 3 0 1 1-2 0V5a1 1 0 0 1 1-1z"/>
                        </svg>
                        <span>体温标准参考</span>
                    </div>
                    
                    <div class="temp-standard-item">
                        <div class="temp-standard-header">
                            <span class="temp-standard-name">PPG 手腕皮肤温度</span>
                            <span class="temp-standard-range">33-37°C (92.3-98.4°F)</span>
                        </div>
                        <div class="temp-standard-bar">
                            <div class="temp-range-segment temp-ppg" style="left: 14.3%; width: 57.1%;"></div>
                        </div>
                        <div class="temp-scale">
                            <span>33°C</span>
                            <span>35°C</span>
                            <span>37°C</span>
                        </div>
                    </div>
                    
                    <div class="temp-standard-item">
                        <div class="temp-standard-header">
                            <span class="temp-standard-name">腋下体温</span>
                            <span class="temp-standard-range">36.0-37.0°C (96.8-98.6°F)</span>
                        </div>
                        <div class="temp-standard-bar">
                            <div class="temp-range-segment temp-armpit" style="left: 57.1%; width: 14.3%;"></div>
                        </div>
                        <div class="temp-scale">
                            <span>36.0°C</span>
                            <span>36.5°C</span>
                            <span>37.0°C</span>
                        </div>
                    </div>
                    
                    <div class="temp-standard-item">
                        <div class="temp-standard-header">
                            <span class="temp-standard-name">舌下体温</span>
                            <span class="temp-standard-range">36.3-37.2°C (97.34-98.96°F)</span>
                        </div>
                        <div class="temp-standard-bar">
                            <div class="temp-range-segment temp-tongue" style="left: 61.4%; width: 12.9%;"></div>
                        </div>
                        <div class="temp-scale">
                            <span>36.3°C</span>
                            <span>36.8°C</span>
                            <span>37.2°C</span>
                        </div>
                    </div>
                    
                    <div class="temp-standard-item">
                        <div class="temp-standard-header">
                            <span class="temp-standard-name">直肠体温</span>
                            <span class="temp-standard-range">36.5-37.7°C (97.7-99.86°F)</span>
                        </div>
                        <div class="temp-standard-bar">
                            <div class="temp-range-segment temp-rectal" style="left: 64.3%; width: 17.1%;"></div>
                        </div>
                        <div class="temp-scale">
                            <span>36.5°C</span>
                            <span>37.1°C</span>
                            <span>37.7°C</span>
                        </div>
                    </div>
                </div>
                
                <a href="#" class="learn-more">了解更多关于体温监测的信息</a>
            </div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const timeRanges = ['日', '周', '月', '年'];
    const timeRangeContainer = document.querySelector('.time-range-container');
    const svg = document.querySelector('.chart-svg');
    const summaryContainer = document.querySelector('.summary-container');
    const chartWidth = 350, chartHeight = 250;
    const chartPadding = { top: 20, bottom: 20, left: 20, right: 20 };
    const chartDrawableHeight = chartHeight - chartPadding.top - chartPadding.bottom;

    let activeTimeRange = '日';
    let selectedSummary = '';

    const summaryData = [
      { id: 'latest', label: '最新: 15:26', value: '36.8', unit: '°C' },
      { id: 'range', label: '体温范围', value: '36.5-37.1', unit: '°C' },
      { id: 'average', label: '平均体温', value: '36.7', unit: '°C' },
      { id: 'daily-max', label: '今日最高', value: '37.1', unit: '°C' },
    ];

    function updateTempDisplay(value, label, date) {
        const tempValueElement = document.querySelector('.temp-value');
        const tempLabelElement = document.querySelector('.temp-label');
        const dateLabelElement = document.querySelector('.date-label');

        tempValueElement.textContent = value;
        tempLabelElement.textContent = label;
        dateLabelElement.textContent = date;
    }

    function hideRangeIndicator() {
        const rangeBarContainer = document.querySelector('.range-bar-container');
        const statusIndicator = document.querySelector('.status-indicator');
        if (rangeBarContainer) {
            rangeBarContainer.style.display = 'none';
        }
        if (statusIndicator) {
            statusIndicator.style.display = 'flex';
        }
    }

    function showRangeIndicator() {
        const rangeBarContainer = document.querySelector('.range-bar-container');
        const statusIndicator = document.querySelector('.status-indicator');
        if (rangeBarContainer) {
            rangeBarContainer.style.display = 'block';
        }
        if (statusIndicator) {
            statusIndicator.style.display = 'none';
        }
    }

    function renderTimeRanges() {
        timeRangeContainer.innerHTML = '';
        timeRanges.forEach(range => {
            const btn = document.createElement('button');
            btn.className = `time-range-btn ${activeTimeRange === range ? 'active' : ''}`;
            btn.textContent = range;
            btn.onclick = () => {
                activeTimeRange = range;
                renderTimeRanges();
                renderChart();
                renderSummaryCards();
            };
            timeRangeContainer.appendChild(btn);
        });
    }

    function renderSummaryCards() {
        summaryContainer.innerHTML = '';

        summaryData.forEach(item => {
            const card = document.createElement('div');
            card.className = `summary-card ${selectedSummary === item.id ? 'active' : ''}`;
            card.innerHTML = `
                <span class="summary-label">${item.label}</span>
                <div>
                    <span class="summary-value">${item.value}</span>
                    <span class="summary-unit">${item.unit}</span>
                </div>
            `;
            card.onclick = () => {
                if (selectedSummary === item.id) {
                    selectedSummary = '';
                    updateTempDisplay('36.8', '实时体温 °C', '今天');
                    showRangeIndicator();
                } else {
                    selectedSummary = item.id;
                    if (item.id === 'average' || item.id === 'daily-max') {
                        updateTempDisplay(item.value.split('-')[0] || item.value, item.label, '今天');
                        hideRangeIndicator();
                    } else {
                        showRangeIndicator();
                    }
                }
                renderSummaryCards();
                renderChart();
            };
            summaryContainer.appendChild(card);
        });
    }
    
    function generateTempData(range) {
        let points = [];
        let count = 0;
        let minBase, minVar, maxBase, maxVar;

        switch(range) {
            case '日': count = 60; minBase=36.5; minVar=0.3; maxBase=37.2; maxVar=0.4; break;
            case '周': count = 50; minBase=36.4; minVar=0.4; maxBase=37.3; maxVar=0.5; break;
            case '月': count = 70; minBase=36.3; minVar=0.5; maxBase=37.4; maxVar=0.6; break;
            case '年': count = 80; minBase=36.2; minVar=0.6; maxBase=37.5; maxVar=0.7; break;
        }
        
        // 生成正常体温数据点（大部分在正常范围内）
        for (let i = 0; i < count; i++) {
            const min = (minBase - minVar) + Math.random() * (2 * minVar);
            const max = (maxBase - maxVar) + Math.random() * (2 * maxVar);
            points.push({
                x: Math.random(),
                y: min + Math.random() * (max - min)
            });
        }
        
        return points;
    }

    function renderChart() {
        svg.innerHTML = '';
        const data = generateTempData(activeTimeRange);
        
        const yScale = (val) => chartHeight - chartPadding.bottom - ((val - 35) / 5) * chartDrawableHeight;
        
        // Grid lines and labels
        const yLabels = [35, 36, 37, 38, 39, 40];
        yLabels.forEach(val => {
            const y = yScale(val);
            svg.innerHTML += `<line class="grid-line" x1="${chartPadding.left}" y1="${y}" x2="${chartWidth - chartPadding.right}" y2="${y}"></line>`;
            svg.innerHTML += `<text class="axis-label" x="0" y="${y + 4}">${val}°C</text>`;
        });
        
        const xLabels = {
            '日': ['0时', '6时', '12时', '18时'],
            '周': ['一', '二', '三', '四', '五', '六', '日'],
            '月': ['1', '10', '20', '30'],
            '年': ['1月', '3月', '6月', '9月', '12月']
        }[activeTimeRange];
        
        xLabels.forEach((label, i) => {
            const x = chartPadding.left + i * ((chartWidth - chartPadding.left - chartPadding.right) / (xLabels.length - 1));
            svg.innerHTML += `<text class="axis-label" x="${x}" y="${chartHeight}" text-anchor="middle">${label}</text>`;
        });

        // Temperature scatter plot points
        const minData = Math.min(...data.map(d => d.y));
        const maxData = Math.max(...data.map(d => d.y));

        data.forEach(d => {
            const x = chartPadding.left + d.x * (chartWidth - chartPadding.left - chartPadding.right);
            const y = yScale(d.y);
            let color = 'var(--temp-normal)'; // 默认绿色
            
            // 根据体温值设置颜色
            if (d.y >= 39.4) {
                color = 'var(--temp-high-fever)'; // 红色 - 高烧
            } else if (d.y >= 38) {
                color = 'var(--temp-low-fever)'; // 橙色 - 低烧
            } else {
                color = 'var(--temp-normal)'; // 绿色 - 正常
            }
            
            let opacity = 1;
            if (selectedSummary === 'range' && d.y !== minData && d.y !== maxData) {
                opacity = 0.3;
            }
            
            if (selectedSummary !== 'average' && selectedSummary !== 'daily-max') {
                 svg.innerHTML += `<circle cx="${x}" cy="${y}" r="2.5" fill="${color}" opacity="${opacity}" />`;
            }
        });
        
        // Overlays for specific views
        if (selectedSummary === 'range') {
            const minPoint = data.reduce((prev, curr) => prev.y < curr.y ? prev : curr);
            const maxPoint = data.reduce((prev, curr) => prev.y > curr.y ? prev : curr);
            const minX = chartPadding.left + minPoint.x * (chartWidth - chartPadding.left - chartPadding.right);
            const minY = yScale(minPoint.y);
            const maxX = chartPadding.left + maxPoint.x * (chartWidth - chartPadding.left - chartPadding.right);
            const maxY = yScale(maxPoint.y);
            
            svg.innerHTML += `<circle cx="${minX}" cy="${minY}" r="4" fill="var(--accent-orange)" />`;
            svg.innerHTML += `<text class="axis-label" x="${minX}" y="${minY - 10}" text-anchor="middle">最低 ${minPoint.y.toFixed(1)}°C</text>`;
            svg.innerHTML += `<circle cx="${maxX}" cy="${maxY}" r="4" fill="var(--accent-orange)" />`;
            svg.innerHTML += `<text class="axis-label" x="${maxX}" y="${maxY - 10}" text-anchor="middle">最高 ${maxPoint.y.toFixed(1)}°C</text>`;
        }
        
        if (selectedSummary === 'latest') {
            const lastPoint = data[data.length - 1];
            const x = chartPadding.left + lastPoint.x * (chartWidth - chartPadding.left - chartPadding.right);
            const y = yScale(lastPoint.y);
            svg.innerHTML += `<circle cx="${x}" cy="${y}" r="5" fill="var(--accent-orange)" />`;
            svg.innerHTML += `<text class="axis-label" x="${x}" y="${y - 12}" text-anchor="middle">最新 ${lastPoint.y.toFixed(1)}°C</text>`;
        }
        
        // 平均体温线
        if (selectedSummary === 'average') {
            const avgTemp = 36.7;
            const lineY = yScale(avgTemp);
            const lineStartX = chartPadding.left;
            const lineEndX = chartWidth - chartPadding.right;
            
            svg.innerHTML += `<line x1="${lineStartX}" y1="${lineY}" x2="${lineEndX}" y2="${lineY}" stroke="#ff9800" stroke-width="2" stroke-dasharray="5,3" />`;
            svg.innerHTML += `<text class="axis-label" x="${lineEndX - 10}" y="${lineY - 8}" text-anchor="end" fill="#ff9800">平均体温 ${avgTemp}°C</text>`;
        }
        
        // 今日最高体温标记
        if (selectedSummary === 'daily-max') {
            const maxTemp = 37.1;
            const lineY = yScale(maxTemp);
            const lineStartX = chartPadding.left;
            const lineEndX = chartWidth - chartPadding.right;
            
            svg.innerHTML += `<line x1="${lineStartX}" y1="${lineY}" x2="${lineEndX}" y2="${lineY}" stroke="#f97316" stroke-width="2" stroke-dasharray="5,3" />`;
            svg.innerHTML += `<text class="axis-label" x="${lineEndX - 10}" y="${lineY - 8}" text-anchor="end" fill="#f97316">今日最高 ${maxTemp}°C</text>`;
        }
    }

    renderTimeRanges();
    renderSummaryCards();
    renderChart();
});
</script>

</body>
</html> 